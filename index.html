<!DOCTYPE html>
<html lang="en-US">
<meta name="keywords" content="animation, Mercury, spin-orbit resonance" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
<title>Mercury's 3:2 Spin-Orbit Resonance</title>
<link rel="stylesheet" href="mercury.css">
</head>

<body>
<div id="wrapper">
<h1>Mercury's 3:2 Spin-Orbit Resonance</h1>
    
<p>This <a href="mercury.html" target="_blank">animation page</a> is created to visualize Mercury's 3:2 spin-orbit resonance. The animations are created using JavaScript. The Physics is explained in the <a href="mercury.html" target="_blank">animation page</a>. This page provides information on the code used to generate the animations.</p>
    
<h2>Animation Setup</h2>
    
<p>The spin-orbit configurations are computed using a standard method in celestial mechanics. The numerical method is explained in detail in <a href="docs/Mercury-SpinOrbit.pdf" target="_blank">this pdf file</a>. Since the spin-orbit configuration is periodic with a period = 3P<sub>rot</sub> = 2P<sub>orb</sub> = 175.938 days, we only need to calculate the configurations within this period.</p>
    
<p>As explained in the pdf file, the configuration can be constructed easily if we know the true anomaly &theta;(t) for -0.5P<sub>orb</sub> &le; t &lt; 1.5P<sub>orb</sub>. Here t=0 is defined as the time when Mercury passes perihelion. In the animation, however, time is shifted by 0.5P<sub>orb</sub> so t(animation)=0 is the same as t = -0.5P<sub>orb</sub>, corresponding to Mercury at aphelion. The reason for the shift is explained at the end of the pdf file.</p>
    
<p>The computation of &theta;(t) is done by a C++ code (in the <code>cpp</code> directory), which is a slightly modified version of a code I wrote in 2014. A python version of the code is also provided (in the <code>python</code> directory). The C++ code returns, among other things, an array of &theta; of size n equally spaced in t between -0.5P<sub>rot</sub> and 1.5P<sub>orb</sub>. The integer n is an input specified by the user. I use n=2400, which is sufficient to make smooth animations. The array is printed in the JavaScript format at the end of a data file. It is then copied and pasted to the JavaScript file <code>mercury.js</code> used for handling the activities in the <a href="mercury.html" target="_blank">animation page</a>. The array is named <code>theta_arr</code>.</p>
    
<p>Update: the array <code>theta_arr</code> can now also be set up using a JavaScript function. I have ported the C++ code that computes &theta;(t) to a JavaScript function. It is placed at the end of <code>mercury.js</code>. It is currently not activated, but can be activated easily by commenting out two lines of code and uncommenting three lines of code near the beginning of <code>mercury.js</code>. This is useful in case one wants to change the value of n. It can now be done without re-running the C++ code. The C++ code is still useful for generating the plots in the pdf file.</p>
    
<p>Two arrays <code>x_arr</code> and <code>y_arr</code> of length n (=2400) are defined storing Mercury's x and y position for -0.5P<sub>orb</sub> &le; t &lt; 1.5P<sub>orb</sub>. They are computed using the equations x = r cos&theta; and y = r sin&theta;, where r = a(1 - e<sup>2</sup>)/(1 + e cos&theta;) is the distance between Mercury and the Sun. Here a = 0.3871 AU is Mercury's orbital semi-major axis and e = 0.2056 is Mercury's orbital eccentricity. In the code, a is set to 1 and so all distances are measured in units of a. The origin of the coordinates is placed at the position of the Sun. In this coordinate system, the center of Mercury's orbital ellipse is at x = -ae = -0.2056a and y=0. The radius of the Sun is R<sub>&odot;</sub> = 6.955&times;10<sup>5</sup>km = 0.012a.</p>
    
<p>Animations are generated by drawing a spin-orbit configuration every 25ms. The time difference between two successive frames is set to &Delta;t = (2/n)P<sub>orb</sub> for the default animation speed (1&times;). Five other animation speeds are provided on the <a href="mercury.html" target="_blank">animation page</a>, and the time difference between two successive frames is equal to the default value multiplied by the specified factor.</p>
    
<h2>Files</h2>
    
<p><code>index.html</code>: this html page.</p>
    
<p><code>mercury.html</code>: the animation page.</p>
    
<p><code>mercury.js</code>: JavaScript file for handling the activities in <code>mercury.html</code></p>
    
<p><code>mercury.css</code>: css file for <code>index.html</code> and <code>mercury.html</code>.</p>
    
<p><code>cpp/Kepler.h</code>: provide a C++ function that solves Kepler's equation E - e sinE = M, where E is the eccentric anomaly, e is the orbital eccentricity, and M = 2<span class="greek">&pi;</span>t/P<sub>orb</sub> is the mean anomaly.</p>

<p><code>cpp/Mercury-SpinOrbit.cpp</code>: a C++ code that calculates Mercury's positions (x, y) evenly spaced in time from t = -0.5P<sub>orb</sub> to t=1.5P<sub>orb</sub>. The time resolution is &Delta;t = (2/n)P<sub>orb</sub>, where n is an integer specified by the user. A point on Mercury's surface is chosen so that at t=0, the point is facing directly at the sun (the subsolar point). This is the magenta point P on the <a href="mercury.html" target="_blank">animation page</a>. The phase angle phi, hour angle H and the rate of change of H as seen at point P are also calculated. The data are outputted to a file named "Mercury-SpinOrbit.dat". At the end of the file, an array of length n is printed containing the values of the true anomaly &theta;(t) for -0.5P<sub>orb</sub> &le; t &lt; 1.5P<sub>orb</sub>. The output is in the format of a JavaScript array, and so it can be directly copied and pasted to a JavaScript file.</p>
    
<p><code>python/Kepler.py</code>, <code>python/Mercury-SpinOrbit.py</code>: python version of <code>cpp/Kepler.h</code> and <code>cpp/Mercury-SpinOrbit.cpp</code>.</p>
    
<p><code>docs</code> directory: contains a LaTeX file, pdf and plots for <a href="docs/Mercury-SpinOrbit.pdf" target="_blank">this pdf file</a> that explains the numerical method.</p>
</div>
<br />
</body>
</html>
